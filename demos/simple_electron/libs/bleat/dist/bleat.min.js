/* @license
 *
 * BLE Abstraction Tool: core functionality - bleat specification
 * Version: 0.0.15
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2015 Rob Moran
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.bleat=b()}(this,function(){"use strict";function a(a){return function(b){g&&g(a+": "+b)}}function b(a){return function(){if("function"==typeof a){var b=[].slice.call(arguments);a.apply(this,b)}}}function c(a){var b=0,c=!1;this.addCallback=function(d){return b++,c=!0,function(){d&&d.apply(null,arguments),0===--b&&a&&a()}},this.finish=function(){!c&&a&&a()}}function d(a){return"number"==typeof a&&(a=a.toString(16)),a.length<=8&&(a=("00000000"+a).slice(-8)+"-0000-1000-8000-00805f9b34fb"),a=a.toLowerCase(),32===a.length&&(a=a.match(/^([0-9a-f]{8})([0-9a-f]{4})([0-9a-f]{4})([0-9a-f]{4})([0-9a-f]{12})$/).splice(1).join("-")),a}var e=null,f={},g=null,h=function(a,b,c){this.address=a,this.name=b,this.serviceUUIDs=c,this.connected=!1,this.services={}};h.prototype.hasService=function(a){return this.serviceUUIDs.some(function(b){return b===a})},h.prototype.connect=function(c,d,f){e.connect(this,function(){return this.connected=!0,f?b(c)():void this.discoverAll(c)}.bind(this),function(){this.connected=!1,this.services={},b(d)()}.bind(this),a("connect error"))},h.prototype.disconnect=function(){e.disconnect(this,a("disconnect error"))},h.prototype.discoverServices=function(c,d){return this.connected===!1?a("discovery error")("device not connected"):("function"==typeof c?(d=c,c=[]):"string"==typeof c&&(c=[c]),void e.discoverServices(this,c,b(d),a("service discovery error")))},h.prototype.discoverAll=function(b){if(this.connected===!1)return a("discovery error")("device not connected");var d=new c(b);this.discoverServices(d.addCallback(function(){Object.keys(this.services).forEach(function(a){var b=this.services[a];b.discoverIncludedServices(d.addCallback()),b.discoverCharacteristics(d.addCallback(function(){Object.keys(b.characteristics).forEach(function(a){var c=b.characteristics[a];c.discoverDescriptors(d.addCallback())},this)}.bind(this)))},this)}.bind(this))),d.finish()};var i=function(a,b,c){this._handle=a,this.uuid=b,this.primary=c,this.includedServices={},this.characteristics={}};i.prototype.discoverIncludedServices=function(c,d){"function"==typeof c?(d=c,c=[]):"string"==typeof c&&(c=[c]),e.discoverIncludedServices(this,c,b(d),a("included service discovery error"))},i.prototype.discoverCharacteristics=function(c,d){"function"==typeof c?(d=c,c=[]):"string"==typeof c&&(c=[c]),e.discoverCharacteristics(this,c,b(d),a("characteristic discovery error"))};var j=function(a,b,c){this._handle=a,this.uuid=b,this.properties=c,this.descriptors={}};j.prototype.discoverDescriptors=function(c,d){"function"==typeof c?(d=c,c=[]):"string"==typeof c&&(c=[c]),e.discoverDescriptors(this,c,b(d),a("descriptor discovery error"))},j.prototype.read=function(c){e.readCharacteristic(this,b(c),a("read characteristic error"))},j.prototype.write=function(c,d){e.writeCharacteristic(this,c,b(d),a("write characteristic error"))},j.prototype.enableNotify=function(c,d){e.enableNotify(this,b(c),b(d),a("enable notify error"))},j.prototype.disableNotify=function(c){e.disableNotify(this,b(c),a("disable notify error"))};var k=function(a,b){this._handle=a,this.uuid=b};return k.prototype.read=function(c){e.readDescriptor(this,b(c),a("read descriptor error"))},k.prototype.write=function(c,d){e.writeDescriptor(this,c,b(d),a("write descriptor error"))},{_Device:h,_Service:i,_Characteristic:j,_Descriptor:k,_canonicalUUID:d,_addAdapter:function(a,b){f[a]=b,e=b},init:function(c,d,h){return g=d,h&&(e=f[h]),e?void e.init(b(c),a("init error")):a("init error")("adapter not found")},startScan:function(b,c){"function"==typeof b?(c=b,b=[]):"string"==typeof b&&(b=[b]),e.stopScan(a("stop scan error"));var d={};e.startScan(b,function(a){d[a.address]||(d[a.address]=a,c&&c(a))}.bind(this),a("scan error"))},stopScan:function(){e.stopScan(a("stop scan error"))}}}),/* @license
 *
 * BLE Abstraction Tool: chromeos adapter
 * Version: 0.0.8
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2015 Rob Moran
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
function(a,b){"function"==typeof define&&define.amd?define(["bleat.core"],b.bind(this,a.chrome)):"object"==typeof exports?module.exports=b(a.chrome,require("./bleat.core")):b(a.chrome,a.bleat)}(this,function(a,b){"use strict";function c(b,c){return function(){if(a.runtime.lastError)return void b(a.runtime.lastError.message);if("function"==typeof c){var d=[].slice.call(arguments);c.apply(this,d)}}}a&&a.bluetooth&&a.bluetoothLowEnergy&&b._addAdapter("chromeos",{charNotifies:{},deviceDisconnects:{},deviceFoundFn:function(){},init:function(b,d){a.bluetooth.getAdapterState(c(d,function(c){c.available?(a.bluetooth.onDeviceAdded.addListener(this.deviceFoundFn),a.bluetoothLowEnergy.onCharacteristicValueChanged.addListener(function(a){"function"==typeof this.charNotifies[a.instanceId]&&(this.charNotifies[a.instanceId](a.value),delete this.charNotifies[a.instanceId])}.bind(this)),a.bluetooth.onDeviceRemoved.addListener(this.checkDisconnect.bind(this)),a.bluetooth.onDeviceChanged.addListener(function(a){a.connected===!1&&this.checkDisconnect(a)}.bind(this)),b()):d("adapter not enabled")}.bind(this)))},checkDisconnect:function(a){"function"==typeof this.deviceDisconnects[a.address]&&(this.deviceDisconnects[a.address](),delete this.deviceDisconnects[a.address])},startScan:function(d,e,f){this.deviceFoundFn=function(a){var c=0===d.length||d.some(function(b){return a.uuids.indexOf(b)>=0});if(c){var f=new b._Device(a.address,a.name,a.uuids||[]);e(f)}},a.bluetooth.getDevices(c(f,function(a){a.forEach(this.deviceFoundFn)})),a.bluetooth.stopDiscovery(function(){a.runtime.lastError;a.bluetooth.startDiscovery(c(f))})},stopScan:function(b){this.deviceFoundFn=function(){},a.bluetooth.stopDiscovery(function(){a.runtime.lastError})},connect:function(b,d,e,f){a.bluetoothLowEnergy.connect(b.address,c(f,function(){this.deviceDisconnects[b.address]=e,d()}.bind(this)))},disconnect:function(b,d){a.bluetoothLowEnergy.disconnect(b.address,c(d))},discoverServices:function(d,e,f,g){a.bluetoothLowEnergy.getServices(d.address,c(g,function(a){a.forEach(function(a){if(0===e.length||e.indexOf(a.uuid)>=0){var c=new b._Service(a.instanceId,a.uuid,a.isPrimary);d.services[c.uuid]=c}}),f()}))},discoverIncludedServices:function(d,e,f,g){a.bluetoothLowEnergy.getIncludedServices(d._handle,c(g,function(a){a.forEach(function(a){if(0===e.length||e.indexOf(a.uuid)>=0){var c=new b._Service(a.instanceId,a.uuid,a.isPrimary);c.includedServices[c.uuid]=c}}),f()}))},discoverCharacteristics:function(d,e,f,g){a.bluetoothLowEnergy.getCharacteristics(d._handle,c(g,function(a){a.forEach(function(a){if(0===e.length||e.indexOf(a.uuid)>=0){var c=new b._Characteristic(a.instanceId,a.uuid,a.properties);d.characteristics[c.uuid]=c}}),f()}))},discoverDescriptors:function(d,e,f,g){a.bluetoothLowEnergy.getDescriptors(d._handle,c(g,function(a){a.forEach(function(a){if(0===e.length||e.indexOf(a.uuid)>=0){var c=new b._Descriptor(a.instanceId,a.uuid);d.descriptors[c.uuid]=c}}),f()}))},readCharacteristic:function(b,d,e){a.bluetoothLowEnergy.readCharacteristicValue(b.handle,c(e,function(a){d(a.value)}))},writeCharacteristic:function(b,d,e,f){a.bluetoothLowEnergy.writeCharacteristicValue(b.handle,d.buffer,c(f,e))},enableNotify:function(b,d,e,f){a.bluetoothLowEnergy.startCharacteristicNotifications(b.handle,null,c(f,function(){this.charNotifies[b.handle]=d,e()}.bind(this)))},disableNotify:function(b,d,e){a.bluetoothLowEnergy.stopCharacteristicNotifications(b.handle,c(e,function(){this.charNotifies[b.handle]&&delete this.charNotifies[b.handle],d()}.bind(this)))},readDescriptor:function(b,d,e){a.bluetoothLowEnergy.readDescriptorValue(b.handle,c(e,function(a){d(a.value)}))},writeDescriptor:function(b,d,e,f){a.bluetoothLowEnergy.writeDescriptorValue(b.handle,d.buffer,c(f,e))}})}),/* @license
 *
 * BLE Abstraction Tool: evothings adapter
 * Version: 0.0.8
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2015 Rob Moran
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
function(a,b){"function"==typeof define&&define.amd?define(["bleat.core"],b.bind(this,a,a.cordova)):"object"==typeof exports?module.exports=b(a,a.cordova,require("./bleat.core")):b(a,a.cordova,a.bleat)}(this,function(a,b,c){"use strict";function d(a){return a>64&&91>a?a-65:a>96&&123>a?a-71:a>47&&58>a?a+4:43===a?62:47===a?63:0}function e(a,b){for(var c,e,f=a.replace(/[^A-Za-z0-9\+\/]/g,""),g=f.length,h=b?Math.ceil((3*g+1>>2)/b)*b:3*g+1>>2,i=new Uint8Array(h),j=0,k=0,l=0;g>l;l++)if(e=3&l,j|=d(f.charCodeAt(l))<<18-6*e,3===e||g-l===1){for(c=0;3>c&&h>k;c++,k++)i[k]=j>>>(16>>>c&24)&255;j=0}return i}function f(a,b){return(a[b+1]<<8)+a[b]}function g(a,b){return(a[b+3]<<24)+(a[b+2]<<16)+(a[b+1]<<8)+a[b]}function h(a,b){for(var c="",d=0;16>d;d++)c+=("00"+a[b+d].toString(16)).slice(-2);return c}function i(a){var b={name:a.name,serviceUUIDs:[]};if(a.advertisementData)a.advertisementData.kCBAdvDataLocalName&&(b.name=a.advertisementData.kCBAdvDataLocalName),a.advertisementData.kCBAdvDataServiceUUIDs&&a.advertisementData.kCBAdvDataServiceUUIDs.forEach(function(a){b.serviceUUIDs.push(c._canonicalUUID(a))});else if(a.scanRecord)for(var d=e(a.scanRecord),i=0;i<d.length;){var j=d[i++];if(0===j)break;j-=1;var k,l=d[i++];if(2==l||3==l)for(k=0;j>k;k+=2)b.serviceUUIDs.push(c._canonicalUUID(f(d,i+k).toString(16)));else if(4==l||5==l)for(k=0;j>k;k+=4)b.serviceUUIDs.push(c._canonicalUUID(g(d,i+k).toString(16)));else if(6==l||7==l)for(k=0;j>k;k+=16)b.serviceUUIDs.push(c._canonicalUUID(h(d,i+k)));else(8==l||9==l)&&(b.name=evothings.ble.fromUtf8(new Uint8Array(d.buffer,i,j)).replace("\x00",""));i+=j}return b}var j="00002902-0000-1000-8000-00805f9b34fb";if(b){var k=b.platformId;c._addAdapter("evothings",{deviceHandles:{},serviceHandles:{},characteristicHandles:{},descriptorHandles:{},notifyCallbacks:{},init:function(b,c){a.evothings&&evothings.ble?b():document.addEventListener("deviceready",b)},startScan:function(a,b,d){evothings.ble.startScan(function(d){var e=i(d),f=0===a.length||a.some(function(a){return e.serviceUUIDs.indexOf(a)>=0});if(f){var g=new c._Device(d.address,e.name,e.serviceUUIDs);b(g)}},d)},stopScan:function(a){evothings.ble.stopScan()},connect:function(a,b,c,d){evothings.ble.connect(a.address,function(d){0===d.state?(this.deviceHandles[a.address]&&(evothings.ble.close(this.deviceHandles[a.address]),delete this.deviceHandles[a.address]),c()):2===d.state&&(this.deviceHandles[a.address]=d.deviceHandle,b())}.bind(this),d)},disconnect:function(a,b){this.deviceHandles[a.address]&&evothings.ble.close(this.deviceHandles[a.address])},discoverServices:function(a,b,d,e){var f=this.deviceHandles[a.address];evothings.ble.services(f,function(e){e.forEach(function(d){if(0===b.length||b.indexOf(d.uuid)>=0){this.serviceHandles[d.handle]=f;var e=new c._Service(d.handle,d.uuid,0===d.type);a.services[e.uuid]=e}},this),d()}.bind(this),e)},discoverIncludedServices:function(a,b,c,d){c()},discoverCharacteristics:function(a,b,d,e){var f=this.serviceHandles[a._handle];evothings.ble.characteristics(f,a._handle,function(e){e.forEach(function(d){if(0===b.length||b.indexOf(d.uuid)>=0){this.characteristicHandles[d.handle]=f;var e=[],g=new c._Characteristic(d.handle,d.uuid,e);a.characteristics[g.uuid]=g}},this),d()}.bind(this),e)},discoverDescriptors:function(a,b,d,e){var f=this.characteristicHandles[a._handle];evothings.ble.descriptors(f,a._handle,function(e){e.forEach(function(d){if(0===b.length||b.indexOf(d.uuid)>=0){this.descriptorHandles[d.handle]=f;var e=new c._Descriptor(d.handle,d.uuid);a.descriptors[e.uuid]=e}},this),d()}.bind(this),e)},readCharacteristic:function(a,b,c){evothings.ble.readCharacteristic(this.characteristicHandles[a._handle],a._handle,function(d){"ios"===k&&this.notifyCallbacks[a.uuid]&&this.enableNotify(a,this.notifyCallbacks[a.uuid],null,c),b(d)}.bind(this),c)},writeCharacteristic:function(a,b,c,d){evothings.ble.writeCharacteristic(this.characteristicHandles[a._handle],a._handle,b,c,d)},enableNotify:function(a,b,c,d){var e=function(){evothings.ble.enableNotification(this.characteristicHandles[a._handle],a._handle,b,d),"ios"===k&&(this.notifyCallbacks[a.uuid]=b),c&&c()};if("android"===k){var f=a.descriptors[j];if(!f)return void d("cannot find notify descriptor");this.writeDescriptor(f,new Uint8Array([1,0]),e.bind(this),d)}else e.call(this)},disableNotify:function(a,b,c){evothings.ble.disableNotification(this.characteristicHandles[a._handle],a._handle,b,c),"ios"===k&&(delete this.notifyCallbacks[a.uuid],b())},readDescriptor:function(a,b,c){evothings.ble.readDescriptor(this.descriptorHandles[a._handle],a._handle,b,c)},writeDescriptor:function(a,b,c,d){evothings.ble.writeDescriptor(this.descriptorHandles[a._handle],a._handle,b,c,d)}})}}),/* @license
 *
 * BLE Abstraction Tool: noble adapter
 * Version: 0.0.4
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2015 Rob Moran
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
function(a,b){"function"==typeof define&&define.amd?define(["noble","bleat.core"],b):"object"==typeof exports?module.exports=b(require("noble"),require("./bleat.core")):b(a.noble,a.bleat)}(this,function(a,b){"use strict";function c(a,b){return function(c){if(c)a(c);else if("function"==typeof b){var d=[].slice.call(arguments,1);b.apply(this,d)}}}a&&b._addAdapter("noble",{foundFn:null,deviceHandles:{},serviceHandles:{},characteristicHandles:{},descriptorHandles:{},charNotifies:{},init:function(c,d){function e(e){"poweredOn"===e?(a.on("discover",function(a){if(this.foundFn){var c=a.address&&"unknown"!==a.address?a.address:a.uuid;this.deviceHandles[c]=a;var d=[];a.advertisement.serviceUuids.forEach(function(a){d.push(b._canonicalUUID(a))});var e=new b._Device(c,a.advertisement.localName||c,d);this.foundFn(e)}}.bind(this)),c()):d("adapter not enabled")}"unknown"===a.state?a.once("stateChange",e.bind(this)):e(a.state)},startScan:function(b,d,e){this.foundFn=d,a.startScanning(b,!1,c(e))},stopScan:function(b){a.stopScanning()},connect:function(a,b,d,e){var f=this.deviceHandles[a.address];f.once("connect",b),f.once("disconnect",d),f.connect(c(e))},disconnect:function(a,b){this.deviceHandles[a.address].disconnect(c(b))},discoverServices:function(a,d,e,f){var g=this.deviceHandles[a.address];g.discoverServices(d,c(f,function(c){c.forEach(function(c){this.serviceHandles[c.uuid]=c;var d=b._canonicalUUID(c.uuid),e=new b._Service(c.uuid,d,!0);a.services[e.uuid]=e},this),e()}.bind(this)))},discoverIncludedServices:function(a,d,e,f){var g=this.serviceHandles[a._handle];g.discoverIncludedServices(d,c(f,function(a){a.forEach(function(a){this.serviceHandles[a.uuid]=a;var c=b._canonicalUUID(a.uuid),d=new b._Service(a.uuid,c,!1);d.includedServices[d.uuid]=d},this),e()}.bind(this)))},discoverCharacteristics:function(a,d,e,f){var g=this.serviceHandles[a._handle];g.discoverCharacteristics(d,c(f,function(c){c.forEach(function(c){this.characteristicHandles[c.uuid]=c;var d=b._canonicalUUID(c.uuid),e=new b._Characteristic(c.uuid,d,c.properties);a.characteristics[e.uuid]=e,c.on("read",function(a,b){if(b===!0&&"function"==typeof this.charNotifies[d]){var c=new Uint8Array(a).buffer;this.charNotifies[d](c)}}.bind(this))},this),e()}.bind(this)))},discoverDescriptors:function(a,d,e,f){var g=this.characteristicHandles[a._handle];g.discoverDescriptors(c(f,function(c){c.forEach(function(c){if(0===d.length||d.indexOf(c.uuid)>=0){var e=g.uuid+"-"+c.uuid;this.descriptorHandles[e]=c;var f=b._canonicalUUID(c.uuid),h=new b._Descriptor(e,f);a.descriptors[f]=h}},this),e()}.bind(this)))},readCharacteristic:function(a,b,d){this.characteristicHandles[a._handle].read(c(d,function(a){var c=new Uint8Array(a).buffer;b(c)}))},writeCharacteristic:function(a,b,d,e){var f=new Buffer(new Uint8Array(b.buffer));this.characteristicHandles[a._handle].write(f,!0,c(e,d))},enableNotify:function(a,b,d,e){this.characteristicHandles[a._handle].once("notify",function(c){return c!==!0?e("notify failed to enable"):(this.charNotifies[a.uuid]=b,void d())}.bind(this)),this.characteristicHandles[a._handle].notify(!0,c(e))},disableNotify:function(a,b,d){this.characteristicHandles[a._handle].once("notify",function(c){return c!==!1?d("notify failed to disable"):(this.charNotifies[a.uuid]&&delete this.charNotifies[a.uuid],void b())}.bind(this)),this.characteristicHandles[a._handle].notify(!1,c(d))},readDescriptor:function(a,b,d){this.descriptorHandles[a._handle].readValue(c(d,function(a){var c=new Uint8Array(a).buffer;b(c)}))},writeDescriptor:function(a,b,d,e){var f=new Buffer(new Uint8Array(b.buffer));this.descriptorHandles[a._handle].writeValue(f,c(e,d))}})});